

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data management and transfer &mdash; ARCHER2 0.4beta documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Software environment" href="sw-environment.html" />
    <link rel="prev" title="Connecting to ARCHER2" href="connecting.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165933823-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-165933823-2');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ARCHER2
          

          
            
            <img src="../_static/archer2_white_transparent.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Quick start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick-start/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-start/quickstart-users.html">Quickstart for users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-start/quickstart-developers.html">Quickstart for developers</a></li>
</ul>
<p class="caption"><span class="caption-text">User and best practice guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="connecting.html">Connecting to ARCHER2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data management and transfer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#useful-resources-and-links">Useful resources and links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-management">Data management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#archer2-storage">ARCHER2 storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#home-file-systems">Home file systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#work-file-systems">Work file systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solid-state-storage">Solid state storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rdf-storage">RDF storage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#archiving-and-data-transfer">Archiving and data transfer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#archiving">Archiving</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tar">tar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zip">zip</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-transfer-via-ssh">Data transfer via SSH</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ssh-data-transfer-performance-considerations">SSH data transfer performance considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scp">scp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rsync">rsync</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#globus-online-go">Globus online (GO)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sw-environment.html">Software environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduler.html">Running jobs on ARCHER2</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">I/O and file systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-environment.html">Application development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Using Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Data analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="profile.html">Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning.html">Performance tuning</a></li>
</ul>
<p class="caption"><span class="caption-text">Research software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../research-software/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/castep/castep.html">CASTEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/chemshell/chemshell.html">ChemShell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/code-saturne/code-saturne.html">Code Saturne</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/cp2k/cp2k.html">CP2K</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/elk/elk.html">ELK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/fenics/fenics.html">FEniCS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/gromacs/gromacs.html">GROMACS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/lammps/lammps.html">LAMMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/mitgcm/mitgcm.html">MITgcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/mo-unified-model/mo-unified-model.html">Met Office Unified Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/namd/namd.html">NAMD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/nemo/nemo.html">NEMO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/nwchem/nwchem.html">NWChem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/onetep/onetep.html">ONETEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/openfoam/openfoam.html">OpenFOAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/qe/qe.html">Quantum Espresso</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research-software/vasp/vasp.html">VASP</a></li>
</ul>
<p class="caption"><span class="caption-text">Software libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software-libraries/overview.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Data analysis and tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data-tools/overview.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Essential skills</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../essentials/overview.html">Overview</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARCHER2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Data management and transfer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/archer2-hpc/archer2-docs/blob/master/user-guide/data.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-management-and-transfer">
<h1>Data management and transfer<a class="headerlink" href="#data-management-and-transfer" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The ARCHER2 Service is not yet available. This documentation is in
development.</p>
</div>
<p>This section covers best practice and tools for data management on ARCHER2.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have any questions on data management and transfer please do not
hesitate to contact the ARCHER2 service desk at <a class="reference external" href="mailto:support&#37;&#52;&#48;archer2&#46;ac&#46;uk">support<span>&#64;</span>archer2<span>&#46;</span>ac<span>&#46;</span>uk</a>.</p>
</div>
<div class="section" id="useful-resources-and-links">
<h2>Useful resources and links<a class="headerlink" href="#useful-resources-and-links" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Harry Mangalam’s guide on <a class="reference external" href="https://hjmangalam.wordpress.com/2009/09/14/how-to-transfer-large-amounts-of-data-via-network/">How to transfer large amounts of data via network</a>. This provides lots of useful advice on transferring data though we now recommend using Globus Online, rather than GridFTP directly.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="data-management">
<h2>Data management<a class="headerlink" href="#data-management" title="Permalink to this headline">¶</a></h2>
<p>We strongly recommend that you give some thought to how you use the various data storage
facilities that are part of the ARCHER2 service. This will not only allow you to use the
machine more effectively but also to ensure that your valuable data is protected.</p>
<div class="section" id="archer2-storage">
<h3>ARCHER2 storage<a class="headerlink" href="#archer2-storage" title="Permalink to this headline">¶</a></h3>
<p>The ARCHER2 service, like many HPC systems has a complex structure. There are a number of
different data storage types available to users:</p>
<blockquote>
<div><ul class="simple">
<li>Home file systems</li>
<li>Work file systems</li>
<li>Solid state storage</li>
<li>RDF storage</li>
</ul>
</div></blockquote>
<p>Each type of storage has different characteristics and policies, and is suitable for
different types of use.</p>
<p>There are also many different types of node available to users:</p>
<blockquote>
<div><ul class="simple">
<li>Login nodes</li>
<li>Compute nodes</li>
<li>Data analysis and pre-/post-processing nodes</li>
<li>Data transfer nodes</li>
</ul>
</div></blockquote>
<p>Each type of node sees a different combination of the storage types.</p>
<div class="section" id="home-file-systems">
<h4>Home file systems<a class="headerlink" href="#home-file-systems" title="Permalink to this headline">¶</a></h4>
<p>There are four independent home file-systems. Every project has an allocation on one
of the four. You do not need to know which one your project uses as your projects space
can always be accessed via the path <code class="docutils literal notranslate"><span class="pre">/home/project-code</span></code>. Each home file-system is
approximately 60TB in size and is implemented using standard Network Attached Storage
(NAS) technology. This means that these disks are not particularly high performance
but are well suited to standard operations like compilation and file editing. These
file systems are visible from the ARCHER2 login nodes and the pre-/post-processing nodes.</p>
<p>The home file systems <strong>are fully backed up</strong>. Full backups are taken weekly with
incremental backups added every day in between. Backups are kept for disaster recovery
purposes only. If you have accidentally lost data from a backed-up file-system and have
no other way of recovering the data then contact us as quickly as possible but we may
be unable to assist.</p>
<p>These file-systems are a good location to keep source-code, copies of scripts and
compiled binaries. Small amounts of important data can also be copied here for safe
keeping though the file systems are not fast enough to manipulate large datasets
effectively.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Files with filenames that contain non-ascii characters and/or non-printable characters
cannot be backed up using our automated process and so will be omitted from all backups.</p>
</div>
</div>
<div class="section" id="work-file-systems">
<h4>Work file systems<a class="headerlink" href="#work-file-systems" title="Permalink to this headline">¶</a></h4>
<p>There are three independent work file-systems:</p>
<blockquote>
<div><ul class="simple">
<li>/fs2 1.5PB</li>
<li>/fs3 1.5PB</li>
<li>/fs4 1.8PB</li>
</ul>
</div></blockquote>
<p>Every project has an allocation on one of the three. You do not need to know which one
your project uses as your projects space can always be accessed via the path
<code class="docutils literal notranslate"><span class="pre">/work/project-code</span></code>.</p>
<p>These are high-performance, Lustre parallel file systems. They are designed to support
data in large files. The performance for data stored in large numbers of small files is
probably not going to be as good.</p>
<p>These are the only file systems that are available on the compute nodes so all data read
or written by jobs running on the compute nodes has to be hosted here.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There are no backups of any data on the work file systems. You should not rely on these
file systems for long term storage.</p>
</div>
<p>Ideally, these file systems should only contain data that is:</p>
<blockquote>
<div><ul class="simple">
<li>actively in use;</li>
<li>recently generated and in the process of being saved elsewhere; or</li>
<li>being made ready for up-coming work.</li>
</ul>
</div></blockquote>
<p>In practice it may be convenient to keep copies of datasets on the work file systems that
you know will be needed at a later date. However, make sure that important data is always
backed up elsewhere and that your work would not be significantly impacted if the data on
the work file systems was lost.</p>
<p>Large data sets can be copied to the RDF storage or transferred off the ARCHER2 service
entirely.</p>
<p>If you have data on the work file systems that you are not going to need in the future
please delete it.</p>
</div>
<div class="section" id="solid-state-storage">
<h4>Solid state storage<a class="headerlink" href="#solid-state-storage" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="rdf-storage">
<h4>RDF storage<a class="headerlink" href="#rdf-storage" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="archiving-and-data-transfer">
<h2>Archiving and data transfer<a class="headerlink" href="#archiving-and-data-transfer" title="Permalink to this headline">¶</a></h2>
<p>Data transfer speed may be limited by many different factors so the
best data transfer mechanism to use depends on the type of data being
transferred and where the data is going.</p>
<blockquote>
<div><ul class="simple">
<li><strong>Disk speed</strong> - The ARCHER2 /work file-systems and the RDF file-systems
are highly parallel consisting of a very large number of high performance
disk drives. This allows them to support a very high data bandwidth.
Unless the remote system has a similar parallel file-system you may
find your transfer speed limited by disk performance.</li>
<li><strong>Meta-data performance</strong> - Meta-data operations such as opening and
closing files or listing the owner or size of a file are much less parallel
than read/write operations. If your data consists of a very large number
of small files you may find your transfer speed is limited by meta-data
operations. Meta-data operations performed by other users of the system
will interact strongly with those you perform so reducing the number of
such operations you use, may reduce variability in your IO timings.</li>
<li><strong>Network speed</strong> - Data transfer performance can be limited by network
speed. More importantly it is limited by the slowest section of the
network between source and destination.</li>
<li><strong>Firewall speed</strong> - Most modern networks are protected by some form of
firewall that filters out malicious traffic. This filtering has some
overhead and can result in a reduction in data transfer performance.
The needs of a general purpose network that hosts email/web-servers and
desktop machines are quite different from a research network that needs
to support high volume data transfers. If you are trying to transfer
data to or from a host on a general purpose network you may find the
firewall for that network will limit the transfer rate you can achieve.</li>
</ul>
</div></blockquote>
<p>The method you use to transfer data to/from ARCHER2 will depend on how much
you want to transfer and where to. The methods we cover in this guide are:</p>
<blockquote>
<div><ul class="simple">
<li><strong>scp/sftp/rsync</strong> - These are the simplest methods of transferring data and
can be used up to moderate amounts of data. If you are transferring data
to your workstation/laptop then this is the method you will use.</li>
<li><strong>Globus Online (GO)</strong> - If you are transferring large amounts of data to another
central computing facility then GO provides high performance parallel data
transfer functionality. Both ends of the transfer must be setup as GO
endpoints (ARCHER2 is configured as a GO endpoint.</li>
</ul>
</div></blockquote>
<p>Before discussing specific data transfer methods, we cover <em>archiving</em> which is
an essential process for transferring data efficiently.</p>
<div class="section" id="archiving">
<h3>Archiving<a class="headerlink" href="#archiving" title="Permalink to this headline">¶</a></h3>
<p>If you have related data that consists of a large number of small files it is
strongly recommended to pack the files into a larger “archive” file for ease of
transfer and manipulation. A single large file makes more efficient use of the
file system and is easier to move and copy and transfer because significantly
fewer meta-data operations are required. Archive files can be created using tools
like <code class="docutils literal notranslate"><span class="pre">tar</span></code> and <code class="docutils literal notranslate"><span class="pre">zip</span></code>.</p>
<div class="section" id="tar">
<h4>tar<a class="headerlink" href="#tar" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">tar</span></code> command packs files into a “tape archive” format. The command has
general form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">file</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>
</pre></div>
</div>
<p>Common options include:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-c</span></code> create a new archive</li>
<li><code class="docutils literal notranslate"><span class="pre">-v</span></code> verbosely list files processed</li>
<li><code class="docutils literal notranslate"><span class="pre">-W</span></code> verify the archive after writing</li>
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code> confirm all file hard links are included in the archive</li>
<li><code class="docutils literal notranslate"><span class="pre">-f</span></code> use an archive file (for historical reasons, tar writes
its output to stdout by default rather than a file).</li>
</ul>
</div></blockquote>
<p>Putting these together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">cvWlf</span> <span class="n">mydata</span><span class="o">.</span><span class="n">tar</span> <span class="n">mydata</span>
</pre></div>
</div>
<p>will create and verify an archive.</p>
<p>To extract files from a tar file, the option <code class="docutils literal notranslate"><span class="pre">-x</span></code> is used. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">mydata</span><span class="o">.</span><span class="n">tar</span>
</pre></div>
</div>
<p>will recover the contents of <code class="docutils literal notranslate"><span class="pre">mydata.tar</span></code> to the current working directory.</p>
<p>To verify an existing tar file against a set of data, the <code class="docutils literal notranslate"><span class="pre">-d</span></code> (diff) option
can be used. By default, no output will be given if a verification succeeds
and an example of a failed verification follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$&gt; tar -df mydata.tar mydata/*
mydata/damaged_file: Mod time differs
mydata/damaged_file: Size differs
</pre></div>
</div>
<p>Note that tar files do not store checksums with their data, requiring the original
data to be present during verification.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Further information on using <code class="docutils literal notranslate"><span class="pre">tar</span></code> can be found in the <code class="docutils literal notranslate"><span class="pre">tar</span></code> manual
(accessed via <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">tar</span></code> or at <a class="reference external" href="https://linux.die.net/man/1/tar">man tar</a>).</p>
</div>
</div>
<div class="section" id="zip">
<h4>zip<a class="headerlink" href="#zip" title="Permalink to this headline">¶</a></h4>
<p>The zip file format is widely used for archiving files and is supported by most
major operating systems. The utility to create zip files can be run from the command
line as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">zip</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">mydata</span><span class="o">.</span><span class="n">zip</span> <span class="p">[</span><span class="n">file</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>
</pre></div>
</div>
<p>Common options are:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-r</span></code> used to zip up a directory</li>
<li><code class="docutils literal notranslate"><span class="pre">-#</span></code> where “#” represents a digit ranging from 0 to 9 to specify compression level,
0 being the least and 9 the most. Default compression is -6 but we recommend using
-0 to speed up the archiving process.</li>
</ul>
</div></blockquote>
<p>Together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">zip</span> <span class="o">-</span><span class="mi">0</span><span class="n">r</span> <span class="n">mydata</span><span class="o">.</span><span class="n">zip</span> <span class="n">mydata</span>
</pre></div>
</div>
<p>will create an archive.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike tar, zip files do not preserve hard links. File data will be copied on archive
creation, <em>e.g.</em> an uncompressed zip archive of a 100MB file and a hard link to that
file will be approximately 200MB in size. This makes zip an unsuitable format if you
wish to precisely reproduce the file system layout.</p>
</div>
<p>The corresponding <code class="docutils literal notranslate"><span class="pre">unzip</span></code> command is used to extract data from the archive. The simplest
use case is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unzip</span> <span class="n">mydata</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
<p>which recovers the contents of the archive to the current working directory.</p>
<p>Files in a zip archive are stored with a CRC checksum to help detect data loss.
<code class="docutils literal notranslate"><span class="pre">unzip</span></code> provides options for verifying this checksum against the stored files. The
relevant flag is <code class="docutils literal notranslate"><span class="pre">-t</span></code> and is used as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$&gt; unzip -t mydata.zip
Archive:  mydata.zip
    testing: mydata/                 OK
    testing: mydata/file             OK
No errors detected in compressed data of mydata.zip.
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Further information on using <code class="docutils literal notranslate"><span class="pre">zip</span></code> can be found in the <code class="docutils literal notranslate"><span class="pre">zip</span></code> manual
(accessed via <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">zip</span></code> or at <a class="reference external" href="https://linux.die.net/man/1/zip">man zip</a>).</p>
</div>
</div>
</div>
<div class="section" id="data-transfer-via-ssh">
<h3>Data transfer via SSH<a class="headerlink" href="#data-transfer-via-ssh" title="Permalink to this headline">¶</a></h3>
<p>The easiest way of transferring data to/from ARCHER2 is to use one of
the standard programs based on the SSH protocol such as <code class="docutils literal notranslate"><span class="pre">scp</span></code>,
<code class="docutils literal notranslate"><span class="pre">sftp</span></code> or <code class="docutils literal notranslate"><span class="pre">rsync</span></code>. These all use the same underlying mechanism (SSH)
as you normally use to log-in to ARCHER2. So, once the the command has
been executed via the command line, you will be prompted for your
password for the specified account on the <em>remote machine</em> (ARCHER2 in
this case).</p>
<p>To avoid having to type in your password multiple times you can set up a
<em>SSH key pair</em> and use an <em>SSH agent</em> as documented in the User Guide at
<a class="reference internal" href="connecting.html"><span class="doc">Connecting to ARCHER2</span></a>.</p>
<div class="section" id="ssh-data-transfer-performance-considerations">
<h4>SSH data transfer performance considerations<a class="headerlink" href="#ssh-data-transfer-performance-considerations" title="Permalink to this headline">¶</a></h4>
<p>The SSH protocol encrypts all traffic it sends. This means that
file transfer using SSH consumes a relatively large amount of CPU time
at both ends of the transfer (for encryption and decryption). The ARCHER2
login nodes have fairly fast processors that can sustain about 100 MB/s
transfer. The encryption algorithm used is negotiated between the SSH
client and the SSH server. There are command line flags that allow you
to specify a preference for which encryption algorithm should be used.
You may be able to improve transfer speeds by requesting a different
algorithm than the default. The <code class="docutils literal notranslate"><span class="pre">aes128-ctr</span></code> or <code class="docutils literal notranslate"><span class="pre">aes256-ctr</span></code> algorithms
are well supported and fast as they are implemented in hardware. <strong>Note:</strong>
these are not usually the default choice when using <code class="docutils literal notranslate"><span class="pre">scp</span></code> so you will
need to manually specify them.</p>
<p>A single SSH based transfer will usually not be able to saturate the
available network bandwidth or the available disk bandwidth so you may
see an overall improvement by running several data transfer operations
in parallel. To reduce metadata interactions it is a good idea to
overlap transfers of files from different directories.</p>
<p>In addition, you should consider the following when transferring data:</p>
<blockquote>
<div><ul class="simple">
<li>Only transfer those files that are required. Consider which data you
really need to keep.</li>
<li>Combine lots of small files into a single <em>tar</em> archive, to reduce the
overheads associated in initiating many separate data transfers (over
SSH, each file counts as an individual transfer).</li>
<li>Compress data before transferring it, <em>e.g.</em> using <code class="docutils literal notranslate"><span class="pre">gzip</span></code>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="scp">
<h4>scp<a class="headerlink" href="#scp" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">scp</span></code> command creates a copy of a file, or if given the <code class="docutils literal notranslate"><span class="pre">-r</span></code>
flag, a directory either from a local machine onto a remote machine
or from a remote machine onto a local machine.</p>
<p>For example, to transfer files to ARCHER2 from a local machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">source</span> <span class="n">user</span><span class="nd">@login</span><span class="o">.</span><span class="n">archer2</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="p">:[</span><span class="n">destination</span><span class="p">]</span>
</pre></div>
</div>
<p>(Remember to replace <code class="docutils literal notranslate"><span class="pre">user</span></code> with your ARCHER2 username in the example
above.)</p>
<p>In the above example, the <code class="docutils literal notranslate"><span class="pre">[destination]</span></code> is optional, as when left
out <code class="docutils literal notranslate"><span class="pre">scp</span></code> will copy the source into your home directory. Also,
the <code class="docutils literal notranslate"><span class="pre">source</span></code> should be the absolute path of the file/directory being
copied or the command should be executed in the directory containing the
source file/directory.</p>
<p>If you want to request a different encryption algorithm add the <code class="docutils literal notranslate"><span class="pre">-c</span>
<span class="pre">[algorithm-name]</span></code> flag to the <code class="docutils literal notranslate"><span class="pre">scp</span></code> options. For example, to use the
(usually faster) <em>arcfour</em> encryption algorithm you would use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">-</span><span class="n">c</span> <span class="n">aes128</span><span class="o">-</span><span class="n">ctr</span> <span class="n">source</span> <span class="n">user</span><span class="nd">@login</span><span class="o">.</span><span class="n">archer2</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="p">:[</span><span class="n">destination</span><span class="p">]</span>
</pre></div>
</div>
<p>(Remember to replace <code class="docutils literal notranslate"><span class="pre">user</span></code> with your ARCHER2 username in the example
above.)</p>
</div>
<div class="section" id="rsync">
<h4>rsync<a class="headerlink" href="#rsync" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">rsync</span></code> command can also transfer data between hosts using a
<code class="docutils literal notranslate"><span class="pre">ssh</span></code> connection. It creates a copy of a file or, if given the <code class="docutils literal notranslate"><span class="pre">-r</span></code>
flag, a directory at the given destination, similar to <code class="docutils literal notranslate"><span class="pre">scp</span></code> above.</p>
<p>Given the <code class="docutils literal notranslate"><span class="pre">-a</span></code> option rsync can also make exact copies (including
permissions), this is referred to as <em>mirroring</em>. In this case the
<code class="docutils literal notranslate"><span class="pre">rsync</span></code> command is executed with <code class="docutils literal notranslate"><span class="pre">ssh</span></code> to create the copy on a remote
machine.</p>
<p>To transfer files to ARCHER2 using <code class="docutils literal notranslate"><span class="pre">rsync</span></code> with <code class="docutils literal notranslate"><span class="pre">ssh</span></code> the command
has the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rsync</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">-</span><span class="n">e</span> <span class="n">ssh</span> <span class="n">source</span> <span class="n">user</span><span class="nd">@login</span><span class="o">.</span><span class="n">archer2</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="p">:[</span><span class="n">destination</span><span class="p">]</span>
</pre></div>
</div>
<p>(Remember to replace <code class="docutils literal notranslate"><span class="pre">user</span></code> with your ARCHER2 username in the example
above.)</p>
<p>In the above example, the <code class="docutils literal notranslate"><span class="pre">[destination]</span></code> is optional, as when left
out rsync will copy the source into your home directory.
Also the <code class="docutils literal notranslate"><span class="pre">source</span></code> should be the absolute path of the file/directory
being copied or the command should be executed in the directory
containing the source file/directory.</p>
<p>Additional flags can be specified for the underlying <code class="docutils literal notranslate"><span class="pre">ssh</span></code> command by
using a quoted string as the argument of the <code class="docutils literal notranslate"><span class="pre">-e</span></code> flag. e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rsync</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;ssh -c arcfour&quot;</span> <span class="n">source</span> <span class="n">user</span><span class="nd">@login</span><span class="o">.</span><span class="n">archer2</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="p">:[</span><span class="n">destination</span><span class="p">]</span>
</pre></div>
</div>
<p>(Remember to replace <code class="docutils literal notranslate"><span class="pre">user</span></code> with your ARCHER2 username in the example
above.)</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Further information on using <code class="docutils literal notranslate"><span class="pre">rsync</span></code> can be found in the <code class="docutils literal notranslate"><span class="pre">rsync</span></code> manual
(accessed via <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">rsync</span></code> or at <a class="reference external" href="https://linux.die.net/man/1/rsync">man rsync</a>).</p>
</div>
</div>
</div>
<div class="section" id="globus-online-go">
<h3>Globus online (GO)<a class="headerlink" href="#globus-online-go" title="Permalink to this headline">¶</a></h3>
<p>Globus online is a web-based file transfer portal provided by the Globus project:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://www.globus.org">www.globus.org</a></li>
</ul>
</div></blockquote>
<p>You will need to register with the web portal and create an account before you can
use GO. Internally, GO uses the GridFTP file transfer mechanism but the web portal
provides a simple user interface and handles all the management of file transfers.
GO will retry failed transfers and send notifications when transfers complete so
there is no need to stay logged into the web portal while transfers are ongoing.</p>
<p>To transfer data between sites, both ends of the transfer need to support
a GO <em>endpoint</em>. GO also provide a client you can install on your laptop or
workstation that can act as a local endpoint (though you often do not have a network
connection with sufficient bandwidth from your local system to support high performance
data transfers). You have to activate an endpoint before use, either by enabling
the connector software on your local machine or by providing login details in
your browser for a server endpoint. Once activated, endpoints will remain active for
a couple of days allowing transfers to complete.</p>
<p>The GO endpoint on ARCHER2 is called “ARCHER2”. When activating this endpoint use
the same username and password you use to login to ARCHER2.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sw-environment.html" class="btn btn-neutral float-right" title="Software environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="connecting.html" class="btn btn-neutral float-left" title="Connecting to ARCHER2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, EPCC

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>